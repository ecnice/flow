var u=(o,l,s)=>new Promise((d,r)=>{var m=e=>{try{t(s.next(e))}catch(a){r(a)}},i=e=>{try{t(s.throw(e))}catch(a){r(a)}},t=e=>e.done?d(e.value):Promise.resolve(e.value).then(m,i);t((s=s.apply(o,l)).next())});import{B as h,a as w}from"./index.30115123.js";import{B as _}from"./TableImg.73863b69.js";import{B,T}from"./BasicForm.6afa01de.js";import{u as y}from"./useTable.7c1e4a10.js";import{g as C}from"./role.b4c60301.js";import{P as S}from"./index.77f474a0.js";import I from"./CompanyTree.2aabf22a.js";import{_ as R}from"./index.9eb02b52.js";import{A as v,j as M,a0 as c,B as F,a1 as P,a6 as f,w as p,a4 as W}from"./vendor.7bee64cc.js";import"./useWindowSizeFn.30e15ddc.js";/* empty css                *//* empty css              */import"./useForm.1fd322f5.js";/* empty css                *//* empty css                *//* empty css               */import"./uuid.2b29000c.js";/* empty css               */import"./useSortable.dd731734.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./index.1445cecb.js";/* empty css                *//* empty css                *//* empty css                */import"./download.78bd314d.js";import"./base64Conver.bb012c73.js";import"./index.83641cbd.js";/* empty css                *//* empty css                */import"./useContentViewHeight.52836077.js";import"./Tree.vue_vue&type=style&index=0&lang.43e63f89.js";import"./useContextMenu.e899090d.js";import"./company.ef0c9563.js";const k=[{title:"\u540D\u79F0",dataIndex:"name",width:150,align:"left"},{title:"\u6807\u8BC6",dataIndex:"sn",width:120,align:"left"},{title:"\u516C\u53F8",dataIndex:"companyName",width:120,align:"left"}],$=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",labelWidth:60,colProps:{span:12,lg:{span:12,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}];const N=v({name:"RoleSelector",components:{BasicModal:h,BasicForm:B,BasicTable:_,PageWrapper:S,CompanyTree:I,TableAction:T},setup(o,{emit:l}){let s="";const[d,{setModalProps:r,closeModal:m}]=w(n=>u(this,null,function*(){r({wrapClassName:"selector-content"}),s=n.personalId,t({searchInfo:{personalId:s}})})),[i,{reload:t,getSelectRows:e}]=y({title:"",api:C,immediate:!1,columns:k,rowSelection:{type:"checkbox",columnWidth:30},formConfig:{labelWidth:60,schemas:$,showResetButton:!1,showAdvancedButton:!1,autoSubmitOnEnter:!0},size:"small",canResize:!1,useSearchForm:!0,showTableSetting:!1,showIndexColumn:!1,bordered:!0,scroll:{y:300}}),a=M(()=>"\u9009\u62E9\u89D2\u8272");function j(){t()}function b(){const n=e();l("success",n),m()}function x(n){let g={companyId:n?n.id:"",personalId:s};t({searchInfo:g})}return{registerTable:i,registerModal:d,getTitle:a,handleSubmit:b,handleSuccess:j,handleSelect:x}}});function z(o,l,s,d,r,m){const i=c("CompanyTree"),t=c("BasicTable"),e=c("PageWrapper"),a=c("BasicModal");return F(),P(a,W({wrapClassName:"selector-body"},o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:f(()=>[p(e,{dense:"",contentClass:"flex"},{default:f(()=>[p(i,{class:"w-1/4 xl:w-3/10",onSelect:o.handleSelect},null,8,["onSelect"]),p(t,{onRegister:o.registerTable,class:"w-3/4 xl:w-7/10"},null,8,["onRegister"])]),_:1})]),_:1},16,["onRegister","title","onOk"])}var _e=R(N,[["render",z]]);export{_e as default};
