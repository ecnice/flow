import{B as A}from"./TableImg.73863b69.js";import{T as I}from"./BasicForm.6afa01de.js";import{u as E}from"./useTable.7c1e4a10.js";import{b as D,d as R,p as k,c as $}from"./modelInfo.10317677.js";import{P as W}from"./index.77f474a0.js";import H from"./FlowCategoryTree.a24abfcf.js";import{b as M}from"./index.30115123.js";import{M as O,c as U,s as V}from"./ModelInfoModal.f820f420.js";import K from"./index.56b14f3e.js";import{A as N,bA as z,c2 as G,aE as L,ba as q,c8 as J,r as j,$ as Q,a0 as i,bo as Y,F as Z,B as ee,a1 as oe,a6 as d,w as a,u as X,ae as te}from"./vendor.7bee64cc.js";/* empty css               *//* empty css                *//* empty css                */import{a as ne}from"./app.c495d461.js";import{_ as se,r as ie,h as ae}from"./index.9eb02b52.js";import{A as re}from"./index.c6b8a214.js";/* empty css                *//* empty css              */import"./useForm.1fd322f5.js";/* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./useWindowSizeFn.30e15ddc.js";/* empty css               */import"./useSortable.dd731734.js";/* empty css                *//* empty css               *//* empty css               */import"./index.1445cecb.js";/* empty css                *//* empty css                *//* empty css                */import"./download.78bd314d.js";import"./base64Conver.bb012c73.js";import"./index.83641cbd.js";/* empty css                */import"./useContentViewHeight.52836077.js";import"./Tree.vue_vue&type=style&index=0&lang.43e63f89.js";import"./useContextMenu.e899090d.js";import"./category.60fe278c.js";/* empty css                *//* empty css                */import"./index.839cf33f.js";import"./index.esm.01aeab01.js";const{createMessage:F}=ae(),le=N({name:"Bpmn",components:{BasicTable:A,PageWrapper:W,FlowCategoryTree:H,ModelInfoModal:O,TableAction:I,Avatar:z,Badge:G,Popconfirm:L,Tag:q,DeleteOutlined:J,Authority:re,BpmnPreviewModal:K},setup(){const o=ie(),[x,{openModal:c}]=M(),[w,{openModal:C,setModalProps:_}]=M();j({});const r=j({}),t=j(!1),[u,{getForm:p,reload:n}]=E({title:"\u5217\u8868",api:D,columns:U,formConfig:{labelWidth:120,schemas:V,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},searchInfo:{modelType:0},useSearchForm:!0,showIndexColumn:!1,bordered:!0,actionColumn:{width:210,align:"left",title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"}}});Q(()=>{const{updateSchema:e}=p();ne().then(s=>{e([{field:"appSn",componentProps:{options:s,labelField:"id"}}])})});function m(){if(!X(r).code){F.warning("\u8BF7\u9009\u62E9\u5206\u7C7B\uFF01",2);return}c(!0,{record:{categoryCode:X(r).code},isUpdate:!0})}function f(e,s){const{status:h}=e;return[{icon:"ant-design:eye",tooltip:"\u6D41\u7A0B\u56FE\u9884\u89C8",label:"",onClick:b.bind(null,e)},{icon:"ant-design:play-circle-filled",tooltip:"\u53D1\u5E03",label:"",popConfirm:{title:"\u786E\u8BA4\u53D1\u5E03\u5417?",confirm:v.bind(null,e)},ifShow:h===2},{icon:"ant-design:stop-twotone",tooltip:"\u505C\u7528",label:"",popConfirm:{title:"\u786E\u8BA4\u505C\u7528\u5417?",confirm:y.bind(null,e)},ifShow:h===3||h===2},{icon:"clarity:note-edit-line",tooltip:"\u4FEE\u6539",label:"",onClick:l.bind(null,e)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"\u5220\u9664",label:"",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:B.bind(null,e)}}]}function b(e){C(!0,{modelKey:e.modelKey,isUpdate:!0}),_({title:`\u9884\u89C8-${e.name}`,bodyStyle:{padding:"0px",margin:"0px"},width:900,height:400,showOkBtn:!1,showCancelBtn:!0,cancelText:"\u5173\u95ED"})}function l(e){c(!0,{record:e,isUpdate:!0})}function g(){o("/flowable/bpmn/designer?modelId=XXXXXXXXXXXXXXXXXXXXXXXX")}function B(e){R([e.id]).then(s=>{n()})}function v(e){t.value=!0,k(e.modelId).then(s=>{n(),F.success("\u53D1\u5E03\u6210\u529F\uFF01",2)}).finally(()=>{t.value=!1})}function y(e){t.value=!0,$(e.modelId).then(s=>{n()}).finally(()=>{t.value=!1})}function T(){n()}function S(){}function P(e){r.value=e;let s={categoryCode:e?e.code:""};n({searchInfo:s})}return{loadingRef:t,registerTable:u,registerBpmnPreviewModal:w,registerModal:x,handlePublish:v,handleStop:y,createActions:f,handleCreate:m,handleEdit:l,cancelDeleteRole:S,handleDelete:B,handleSuccess:T,openTab:g,handleSelect:P}}}),de=te(" \u65B0\u589E ");function ce(o,x,c,w,C,_){const r=i("FlowCategoryTree"),t=i("a-button"),u=i("TableAction"),p=i("BasicTable"),n=i("ModelInfoModal"),m=i("BpmnPreviewModal"),f=i("PageWrapper"),b=Y("loading");return Z((ee(),oe(f,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:d(()=>[a(r,{class:"w-1/4 xl:w-1/5",onSelect:o.handleSelect},null,8,["onSelect"]),a(p,{onRegister:o.registerTable,class:"w-3/4 xl:w-4/5"},{toolbar:d(()=>[a(t,{type:"primary",onClick:o.handleCreate},{default:d(()=>[de]),_:1},8,["onClick"])]),action:d(({record:l,column:g})=>[a(u,{actions:o.createActions(l,g)},null,8,["actions"])]),_:1},8,["onRegister"]),a(n,{onRegister:o.registerModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"]),a(m,{onRegister:o.registerBpmnPreviewModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1},512)),[[b,o.loadingRef]])}var to=se(le,[["render",ce],["__scopeId","data-v-cd2ca054"]]);export{to as default};
