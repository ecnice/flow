var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,c=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(a)for(var n of a(t))s.call(t,n)&&c(e,n,t[n]);return e},o=(e,a)=>t(e,n(a)),i=(e,t,n)=>new Promise(((a,l)=>{var s=e=>{try{r(n.next(e))}catch(t){l(t)}},c=e=>{try{r(n.throw(e))}catch(t){l(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,c);r((n=n.apply(e,t)).next())}));import{_ as d}from"./TableImg.d975601e.js";import{g as u}from"./useForm.d555d56b.js";import{ae as p,y,aw as h,ax as m,aj as f,j as v,R as b,z as k,A as x,Z as g,B as K,F as j,a3 as S,a7 as A,a8 as _,J as C,v as L,at as E,a6 as w,an as I,K as T,u as N,m as B,r as M,X as D,Y as P,ad as O,aX as $,bo as F,aL as H,ac as R,N as U,t as X,c4 as Y,o as W,ah as z,Q as G,G as J,H as V,c5 as Q,a0 as Z,am as q,bp as ee,bO as te,bw as ne,aU as ae,aT as le,b6 as se,bn as ce,c3 as re,bk as oe}from"./vendor.3dc066e5.js";import{i as ie,_ as de,as as ue,p as pe,e as ye,aH as he,aI as me,c as fe,ao as ve,j as be,aF as ke,V as xe,aJ as ge,af as Ke,H as je}from"./index.b41e2c0e.js";/* empty css              */import{P as Se}from"./index.3e5e5108.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{searchFormSchema as Ae,cardList as _e}from"./data.1eba7919.js";import Ce from"./ProcessHeader.d2074b3d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./useWindowSizeFn.308e6090.js";import"./index.b437b00c.js";import"./onMountedOrActivated.c01d8630.js";import"./useSortable.be81b66a.js";/* empty css              *//* empty css              */import"./index.82d0d758.js";import"./download.55ddd36a.js";import"./index.c14dc721.js";/* empty css              *//* empty css              */import"./useContentViewHeight.16e0f08b.js";import"./process.424afad8.js";const Le=({icon:e})=>e?ie(e)?p(de,{icon:e,class:"mr-1"}):de:null;var Ee,we;(we=Ee||(Ee={}))[we.SELECT_ALL=0]="SELECT_ALL",we[we.UN_SELECT_ALL=1]="UN_SELECT_ALL",we[we.EXPAND_ALL=2]="EXPAND_ALL",we[we.UN_EXPAND_ALL=3]="UN_EXPAND_ALL",we[we.CHECK_STRICTLY=4]="CHECK_STRICTLY",we[we.CHECK_UN_STRICTLY=5]="CHECK_UN_STRICTLY";var Ie=y({name:"BasicTreeHeader",components:{BasicTitle:ue,Icon:de,Dropdown:h,Menu:m,MenuItem:m.Item,MenuDivider:m.Divider,InputSearch:f.Search},props:{helpMessage:{type:[String,Array],default:""},title:pe.string,toolbar:pe.bool,checkable:pe.bool,search:pe.bool,checkAll:pe.func,expandAll:pe.func},emits:["strictly-change","search"],setup(e,{emit:t}){const{t:n}=ye(),a=v((()=>{const{checkable:t}=e,a=[{label:n("component.tree.expandAll"),value:2},{label:n("component.tree.unExpandAll"),value:3,divider:t}];return t?[{label:n("component.tree.selectAll"),value:0},{label:n("component.tree.unSelectAll"),value:1,divider:t},...a,{label:n("component.tree.checkStrictly"),value:4},{label:n("component.tree.checkUnStrictly"),value:5}]:a}));const l=b((function(e){t("search",e)}),200);return{t:n,toolbarList:a,handleMenuClick:function(n){var a,l,s,c;const{key:r}=n;switch(r){case 0:null==(a=e.checkAll)||a.call(e,!0);break;case 1:null==(l=e.checkAll)||l.call(e,!1);break;case 2:null==(s=e.expandAll)||s.call(e,!0);break;case 3:null==(c=e.expandAll)||c.call(e,!1);break;case 4:t("strictly-change",!1);break;case 5:t("strictly-change",!0)}},handleSearch:function(e){l(e.target.value)}}}});const Te=T();k("data-v-40a068d0");const Ne={class:"flex px-2 py-1.5 items-center basic-tree-header"},Be={key:2,class:"flex flex-1 justify-end items-center cursor-pointer"},Me={key:0,class:"mr-1 w-2/3"};x();const De=Te(((e,t,n,a,l,s)=>{const c=g("BasicTitle"),r=g("InputSearch"),o=g("Icon"),i=g("MenuItem"),d=g("MenuDivider"),u=g("Menu"),p=g("Dropdown");return K(),j("div",Ne,[e.$slots.headerTitle?S(e.$slots,"headerTitle",{key:0},void 0,!0):A("",!0),!e.$slots.headerTitle&&e.title?(K(),j(c,{key:1,helpMessage:e.helpMessage},{default:Te((()=>[_(C(e.title),1)])),_:1},8,["helpMessage"])):A("",!0),e.search||e.toolbar?(K(),j("div",Be,[e.search?(K(),j("div",Me,[L(r,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",onChange:e.handleSearch},null,8,["placeholder","onChange"])])):A("",!0),e.toolbar?(K(),j(p,{key:1,onClick:t[1]||(t[1]=E((()=>{}),["prevent"]))},{overlay:Te((()=>[L(u,{onClick:e.handleMenuClick},{default:Te((()=>[(K(!0),j(w,null,I(e.toolbarList,(e=>(K(),j(w,{key:e.value},[L(i,{key:e.value},{default:Te((()=>[_(C(e.label),1)])),_:2},1040),e.divider?(K(),j(d,{key:0})):A("",!0)],64)))),128))])),_:1},8,["onClick"])])),default:Te((()=>[L(o,{icon:"ion:ellipsis-vertical"})])),_:1})):A("",!0)])):A("",!0)])}));Ie.render=De,Ie.__scopeId="data-v-40a068d0";const Pe={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default:()=>({x:0,y:0})},items:{type:Array,default:()=>[]}},Oe=e=>{const{item:t}=e;return L("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&L(de,{class:"mr-2",icon:t.icon},null),L("span",null,[t.label])])};var $e=y({name:"ContextMenu",props:Pe,setup(e){const t=M(null),n=M(!1),a=v((()=>{const{axis:t,items:n,styles:a,width:l}=e,{x:s,y:c}=t||{x:0,y:0},i=40*(n||[]).length,d=l,u=document.body,p=u.clientWidth<s+d?s-d:s,y=u.clientHeight<c+i?c-i:c;return o(r({},a),{width:`${l}px`,left:`${p+1}px`,top:`${y+1}px`})}));function l(e,t){const{handler:a,disabled:l}=e;l||(n.value=!1,null==t||t.stopPropagation(),null==t||t.preventDefault(),null==a||a())}function s(t){return t.map((t=>{const{disabled:a,label:c,children:r,divider:o=!1}=t,i={item:t,handler:l,showIcon:e.showIcon};return r&&0!==r.length?N(n)?L(m.SubMenu,{key:c,disabled:a,popupClassName:"context-menu__popup"},{title:()=>L(Oe,i,null),default:()=>s(r)}):null:L(w,null,[L(m.Item,{disabled:a,class:"context-menu__item",key:c},{default:()=>[L(Oe,i,null)]}),o?L($,{key:`d-${c}`},null):null])}))}return D((()=>{P((()=>n.value=!0))})),O((()=>{const e=N(t);e&&document.body.removeChild(e)})),()=>{let l;if(!N(n))return null;const{items:c}=e;return L(m,{inlineIndent:12,mode:"vertical",class:"context-menu",ref:t,style:N(a)},"function"==typeof(r=l=s(c))||"[object Object]"===Object.prototype.toString.call(r)&&!F(r)?l:{default:()=>[l]});var r}}});const Fe={domList:[],resolve:()=>{}},He=function(e){const{event:t}=e||{};if(t&&(null==t||t.preventDefault()),me)return new Promise((n=>{const a=document.body,l=document.createElement("div"),s={};e.styles&&(s.styles=e.styles),e.items&&(s.items=e.items),e.event&&(s.customEvent=t,s.axis={x:t.clientX,y:t.clientY});const c=L($e,s);H(c,l);const r=function(){Fe.resolve("")};Fe.domList.push(l);const o=function(){Fe.domList.forEach((e=>{try{e&&a.removeChild(e)}catch(t){}})),a.removeEventListener("click",r),a.removeEventListener("scroll",r)};Fe.resolve=function(e){o(),n(e)},o(),a.appendChild(l),a.addEventListener("click",r),a.addEventListener("scroll",r)}))},Re=function(){Fe&&(Fe.resolve(""),Fe.domList=[])};var Ue=y({name:"BasicTree",inheritAttrs:!1,props:{value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:pe.string,toolbar:pe.bool,search:pe.bool,checkStrictly:pe.bool,clickRowToExpand:pe.bool.def(!0),checkable:pe.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:pe.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","change","check"],setup(e,{attrs:t,slots:n,emit:a,expose:l}){const s=U({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),c=U({startSearch:!1,searchData:[]}),d=M([]),[u]=function(e=!0){return R()&&e&&O((()=>{Re()})),[He,Re]}(),{prefixCls:p}=fe("basic-tree"),y=v((()=>{const{replaceFields:t}=e;return r({children:"children",title:"title",key:"key"},t)})),h=v((()=>{let n=o(r(r({blockNode:!0},t),e),{expandedKeys:s.expandedKeys,selectedKeys:s.selectedKeys,checkedKeys:s.checkedKeys,checkStrictly:s.checkStrictly,replaceFields:N(y),"onUpdate:expandedKeys":e=>{s.expandedKeys=e,a("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{s.selectedKeys=e,a("update:selectedKeys",e)},onCheck:(e,t)=>{let n=X(s.checkedKeys);if(ve(n)&&c.startSearch){const{key:e}=N(y);n=Y(n,S(t.node.$attrs.node[e])),t.checked&&n.push(t.node.$attrs.node[e]),s.checkedKeys=n}else s.checkedKeys=e;const l=X(s.checkedKeys);a("update:value",l),a("check",l,t)},onRightClick:A});return W(n,"treeData","class")})),m=v((()=>c.startSearch?c.searchData:N(d))),f=v((()=>!m.value||0===m.value.length)),{deleteNodeByKey:b,insertNodeByKey:k,insertNodesByKey:x,filterByLevel:g,updateNodeByKey:K,getAllKeys:j,getChildrenKeys:S}=function(e,t){function n(a){const l=[],s=a||N(e),{key:c,children:r}=N(t);if(!r||!c)return l;for(let e=0;e<s.length;e++){const t=s[e];l.push(t[c]);const a=t[r];a&&a.length&&l.push(...n(a))}return l}return{deleteNodeByKey:function n(a,l){if(!a)return;const s=l||N(e),{key:c,children:r}=N(t);if(r&&c)for(let e=0;e<s.length;e++){const t=s[e],l=t[r];if(t[c]===a){s.splice(e,1);break}l&&l.length&&n(a,t[r])}},insertNodeByKey:function({parentKey:n=null,node:a,push:l="push"}){const s=B(N(e));if(!n)return s[l](a),void(e.value=s);const{key:c,children:r}=N(t);r&&c&&(he(s,(e=>{if(e[c]===n)return e[r]=e[r]||[],e[r][l](a),!0})),e.value=s)},insertNodesByKey:function({parentKey:n=null,list:a,push:l="push"}){const s=B(N(e));if(a&&!(a.length<1))if(n){const{key:c,children:r}=N(t);if(!r||!c)return;he(s,(t=>{if(t[c]===n){t[r]=t[r]||[];for(let e=0;e<a.length;e++)t[r][l](a[e]);return e.value=s,!0}}))}else for(let e=0;e<a.length;e++)s[l](a[e])},filterByLevel:function n(a=1,l,s=1){if(!a)return[];const c=[],r=l||N(e)||[];for(let e=0;e<r.length;e++){const l=r[e],{key:o,children:i}=N(t),d=o?l[o]:"",u=i?l[i]:[];c.push(d),u&&u.length&&s<a&&(s+=1,c.push(...n(a,u,s)))}return c},updateNodeByKey:function n(a,l,s){if(!a)return;const c=s||N(e),{key:o,children:i}=N(t);if(i&&o)for(let e=0;e<c.length;e++){const t=c[e],s=t[i];if(t[o]===a){c[e]=r(r({},c[e]),l);break}s&&s.length&&n(a,l,t[i])}},getAllKeys:n,getChildrenKeys:function a(l,s){const c=[],r=s||N(e),{key:o,children:i}=N(t);if(!i||!o)return c;for(let e=0;e<r.length;e++){const t=r[e],s=t[i];l===t[o]?(c.push(t[o]),s&&s.length&&c.push(...n(s))):s&&s.length&&c.push(...a(l,s))}return c}}}(d,y);function A(t){return i(this,arguments,(function*({event:t,node:n}){var a;const{rightMenuList:l=[],beforeRightClick:s}=e;let c={event:t,items:[]};if(s&&be(s)){let e=yield s(n,t);Array.isArray(e)?c.items=e:Object.assign(c,e)}else c.items=l;(null==(a=c.items)?void 0:a.length)&&u(c)}))}function _(e){s.expandedKeys=e}function C(e){s.checkedKeys=e?j():[]}function E(e){s.expandedKeys=e?j():[]}function I(e){s.checkStrictly=e}function T(e){if(!e)return void(c.startSearch=!1);c.startSearch=!0;const{title:t}=N(y);c.searchData=ge(N(d),(n=>{var a,l;return null!=(l=null==(a=n[t])?void 0:a.includes(e))&&l}),N(y))}function P(t,n){if(e.clickRowToExpand&&n&&0!==n.length)if(s.expandedKeys.includes(t)){const e=[...s.expandedKeys],n=e.findIndex((e=>e===t));-1!==n&&e.splice(n,1),_(e)}else _([...s.expandedKeys,t])}z((()=>{d.value=e.treeData})),D((()=>{const t=parseInt(e.defaultExpandLevel);t>0?s.expandedKeys=g(t):e.defaultExpandAll&&E(!0)})),z((()=>{s.expandedKeys=e.expandedKeys})),z((()=>{s.selectedKeys=e.selectedKeys})),z((()=>{s.checkedKeys=e.checkedKeys})),G((()=>e.value),(()=>{s.checkedKeys=X(e.value||[])})),G((()=>s.checkedKeys),(()=>{const e=X(s.checkedKeys);a("update:value",e),a("change",e)})),z((()=>{s.checkStrictly=e.checkStrictly}));function $(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>{var a;let l=!0;return be(e.show)?l=null==(a=e.show)?void 0:a.call(e,t):je(e.show)&&(l=e.show),l?L("span",{key:n,class:`${p}__action`},[e.render(t)]):null}))}function H({data:t,level:a}){return t?t.map((t=>{const{title:l,key:s,children:c}=N(y),i=W(t,"title"),d=function(t,n){return!n&&e.renderIcon&&be(e.renderIcon)?e.renderIcon(t):n}(o(r({},t),{level:a}),t.icon),u=ee(t,c)||[];return L(Q.TreeNode,Z(i,{node:X(t),key:ee(t,s)}),{title:()=>{var e;return L("span",{class:`${p}-title pl-2`,onClick:P.bind(null,t[s],t[c])},[(null==n?void 0:n.title)?Ke(n,"title",t):L(w,null,[d&&L(Le,{icon:d},null),L("span",{class:(null==(e=N(h))?void 0:e.blockNode)?`${p}__content`:""},[ee(t,l)]),L("span",{class:`${p}__actions`},[$(o(r({},t),{level:a}))])])])},default:()=>H({data:u,level:a+1})})})):null}return l({setExpandedKeys:_,getExpandedKeys:function(){return s.expandedKeys},setSelectedKeys:function(e){s.selectedKeys=e},getSelectedKeys:function(){return s.selectedKeys},setCheckedKeys:function(e){s.checkedKeys=e},getCheckedKeys:function(){return s.checkedKeys},insertNodeByKey:k,insertNodesByKey:x,deleteNodeByKey:b,updateNodeByKey:K,checkAll:C,expandAll:E,filterByLevel:e=>{s.expandedKeys=g(e)}}),()=>{let a;const{title:l,helpMessage:s,toolbar:c,search:o,checkable:i}=e,d=l||c||o||n.headerTitle;return L("div",{class:[p,"h-full",t.class]},[d&&L(Ie,{checkable:i,checkAll:C,expandAll:E,title:l,search:o,toolbar:c,helpMessage:s,onStrictlyChange:I,onSearch:T},(u=a=ke(n),"function"==typeof u||"[object Object]"===Object.prototype.toString.call(u)&&!F(u)?a:{default:()=>[a]})),J(L(xe,{style:{height:"calc(100% - 38px)"}},{default:()=>[L(Q,Z(N(h),{showIcon:!1}),r({default:()=>H({data:N(m),level:1})},ke(n)))]}),[[V,!N(f)]]),J(L(q,{image:q.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[V,N(f)]])]);var u}}}),Xe=y({components:{Progress:te,PageWrapper:Se,BasicForm:u,[ne.name]:ne,[ne.Item.name]:ne.Item,AListItemMeta:ne.Item.Meta,[ae.name]:ae,[le.name]:le,BasicTree:Ue,BasicTable:d,ProcessHeader:Ce,[$.name]:$,[se.name]:se,AEmpty:q,[ce.name]:ce,[ce.Item.name]:ce.Item,[re.name]:re,[re.Step.name]:re.Step,[oe.name]:oe,[oe.TabPane.name]:oe.TabPane},setup(){const e=M([]),t=M();return e.value.push({id:"common",name:"通用流程",children:[{id:"hr",name:"HR通用流程"},{id:"finance",name:"发文流程"},{id:"fawu",name:"监管部流程"},{id:"gongguan",name:"工管流程"}]}),e.value.push({id:"jituan",name:"集团总部",children:[{id:"gongdi",name:"工地流程"}]}),{treeData:e,searchFormSchema:Ae,prefixCls:"list-basic",list:_e,categoryTree:t,pagination:{show:!0,pageSize:3}}}});const Ye=T();k("data-v-1fae7ce6");const We={key:0,class:"extra"},ze={class:"description"};x();const Ge=Ye(((e,t,n,a,l,s)=>{const c=g("process-header"),r=g("BasicTree"),o=g("BasicForm"),i=g("router-link"),d=g("a-list-item-meta"),u=g("a-list-item"),p=g("a-list"),y=g("PageWrapper");return K(),j(y,{title:"流程中心",contentClass:"flex",contentBackground:"",class:"!mt-4"},{footer:Ye((()=>[L(c,{current:"launch"})])),default:Ye((()=>[L(r,{title:"流程分类",clickRowToExpand:!0,treeData:e.treeData,replaceFields:{key:"id",title:"name"},onSelect:e.handleSelect,class:"w-1/4 xl:w-1/5 mt-2",ref:"categoryTree",expandedKeys:["jituan","common"],selectedKeys:["common"]},null,8,["treeData","onSelect"]),L("div",{class:["w-3/4 xl:w-4/5 !mt-4",`${e.prefixCls}__content`]},[L(o,{class:`${e.prefixCls}__header-form`,labelWidth:100,schemas:e.searchFormSchema,showActionButtonGroup:!1},null,8,["class","schemas"]),L(p,{pagination:e.pagination},{default:Ye((()=>[(K(!0),j(w,null,I(e.list,(e=>(K(),j(u,{key:e.id,class:"list"},{default:Ye((()=>[L(d,null,{title:Ye((()=>[L(i,{to:`/process/launch/${e.modelKey}`},{default:Ye((()=>[L("span",null,C(e.title),1),e.extra?(K(),j("div",We,C(e.extra),1)):A("",!0)])),_:2},1032,["to"])])),description:Ye((()=>[L("div",ze,C(e.description),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["pagination"])],2)])),_:1})}));Xe.render=Ge,Xe.__scopeId="data-v-1fae7ce6";export default Xe;
