var M=Object.defineProperty;var f=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var j=(o,s,e)=>s in o?M(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,g=(o,s)=>{for(var e in s||(s={}))_.call(s,e)&&j(o,e,s[e]);if(f)for(var e of f(s))w.call(s,e)&&j(o,e,s[e]);return o};var l=(o,s,e)=>new Promise((d,p)=>{var m=r=>{try{t(e.next(r))}catch(a){p(a)}},u=r=>{try{t(e.throw(r))}catch(a){p(a)}},t=r=>r.done?d(r.value):Promise.resolve(r.value).then(m,u);t((e=e.apply(o,s)).next())});import{B as P,a as V}from"./index.30115123.js";import{B as C}from"./BasicForm.6afa01de.js";import{u as S}from"./useForm.1fd322f5.js";import{p as E,e as $}from"./module.data.797c84c5.js";import{g as k}from"./appPrivilegeValue.37bfb4af.js";import{_ as y}from"./index.9eb02b52.js";import{A as R,r as A,u as B,j as L,a0 as v,B as O,a1 as T,a6 as U,w as W,a4 as z}from"./vendor.7bee64cc.js";import"./useWindowSizeFn.30e15ddc.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.1445cecb.js";/* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./download.78bd314d.js";import"./base64Conver.bb012c73.js";import"./index.83641cbd.js";const D=R({name:"PValueSettingModal",components:{BasicModal:P,BasicForm:C},emits:["success","register"],setup(o,{emit:s}){const e=A(!0),[d,{resetFields:p,setFieldsValue:m,updateSchema:u,validate:t}]=S({labelWidth:100,schemas:E,showActionButtonGroup:!1}),[r,{setModalProps:a,closeModal:b}]=V(i=>l(this,null,function*(){if(p(),a({confirmLoading:!1,title:"\u8BBE\u7F6E\u83DC\u5355\u3010"+i.record.name+"\u3011\u7684\u6743\u9650\u503C"}),e.value=!!(i==null?void 0:i.isUpdate),B(e)){m(g({},i.record));let c=(yield k())||[];c.forEach(n=>{n.value=n.position,n.label=n.name});const h=i.record.pvs.map(n=>n.position);u({field:"pvs",componentProps:{options:c}}),m({pvs:h})}})),x=L(()=>B(e)?"\u8BBE\u7F6E\u6743\u9650\u503C":"\u65B0\u589E");function F(){return l(this,null,function*(){try{a({confirmLoading:!0});const i=yield t();i.pvs=i.pvs.map(c=>({position:c})),yield $(i),b(),s("success")}finally{a({confirmLoading:!1})}})}return{registerModal:r,registerForm:d,getTitle:x,handleSubmit:F}}});function G(o,s,e,d,p,m){const u=v("BasicForm"),t=v("BasicModal");return O(),T(t,z(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:U(()=>[W(u,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var ge=y(D,[["render",G]]);export{ge as default};
