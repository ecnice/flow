var y=Object.defineProperty;var B=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var E=(u,t,e)=>t in u?y(u,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[t]=e,h=(u,t)=>{for(var e in t||(t={}))A.call(t,e)&&E(u,e,t[e]);if(B)for(var e of B(t))I.call(t,e)&&E(u,e,t[e]);return u};var p=(u,t,e)=>new Promise((l,a)=>{var c=o=>{try{r(e.next(o))}catch(n){a(n)}},i=o=>{try{r(e.throw(o))}catch(n){a(n)}},r=o=>o.done?l(o.value):Promise.resolve(o.value).then(c,i);r((e=e.apply(u,t)).next())});import{B as M,a as j}from"./index.c505e96f.js";import{B as v}from"./BasicForm.0ba2e15f.js";import{u as x}from"./useForm.696aa965.js";import{c as N,s as P}from"./dicType.fa4263ef.js";import{_ as R}from"./index.e84e956c.js";import{A as S,r as T,u as F,j as k,a0 as D,B as q,a1 as $,a6 as C,w as O,a4 as V}from"./vendor.5879c5ca.js";const Y=[{title:"\u540D\u79F0",dataIndex:"name",align:"left"},{title:"\u7F16\u7801",dataIndex:"code",align:"left"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:100},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],ee=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u7801"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],G=[{field:"id",label:"ID",component:"Input",show:!1},{field:"pid",label:"pid",required:!1,component:"Input",show:!1},{field:"name",label:"\u540D\u79F0",required:!0,component:"Input",rules:[{required:!0,whitespace:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:64,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E64\uFF01"}]},{field:"code",label:"\u7F16\u7801",required:!0,component:"Input"},{field:"orderNo",label:"\u6392\u5E8F\u53F7",required:!1,component:"InputNumber"}],L=S({name:"DicTypeModal",components:{BasicModal:M,BasicForm:v},emits:["success","register"],setup(u,{emit:t}){const e=T(!0),[l,{resetFields:a,updateSchema:c,setFieldsValue:i,validate:r}]=x({labelWidth:100,schemas:G,showActionButtonGroup:!1}),o=s=>[{trigger:"blur",validator:(m,g)=>g?N({id:s.id,field:s.field,fieldValue:g,fieldName:s.fieldName}).then(f=>f?Promise.resolve():Promise.reject(s.fieldName+"\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\uFF01")).catch(f=>Promise.reject(f)):Promise.resolve()}],[n,{setModalProps:d,closeModal:_}]=j(s=>p(this,null,function*(){yield a(),d({confirmLoading:!1}),e.value=!!(s==null?void 0:s.isUpdate);let m=s.record;yield c([{field:"code",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:new RegExp("^[0-9a-zA-Z-_]{1,}$"),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{max:64,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E64\uFF01"},...o({id:F(e)&&m&&m.id||"",field:"code",fieldValue:"",fieldName:"\u7F16\u7801"})]}]),F(e)&&i(h({},s.record))})),b=k(()=>F(e)?"\u4FEE\u6539":"\u65B0\u589E");function w(){return p(this,null,function*(){try{d({confirmLoading:!0});const s=yield r();yield P(s),_(),t("success")}finally{d({confirmLoading:!1})}})}return{registerModal:n,registerForm:l,getTitle:b,handleSubmit:w}}});function U(u,t,e,l,a,c){const i=D("BasicForm"),r=D("BasicModal");return q(),$(r,V(u.$attrs,{onRegister:u.registerModal,title:u.getTitle,onOk:u.handleSubmit}),{default:C(()=>[O(i,{onRegister:u.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var z=R(L,[["render",U]]),ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:z});export{ue as D,z as G,Y as c,ee as s};
