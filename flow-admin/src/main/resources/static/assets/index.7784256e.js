var C=(e,s,n)=>new Promise((m,c)=>{var b=o=>{try{i(n.next(o))}catch(a){c(a)}},u=o=>{try{i(n.throw(o))}catch(a){c(a)}},i=o=>o.done?m(o.value):Promise.resolve(o.value).then(b,u);i((n=n.apply(e,s)).next())});import{B}from"./TableImg.513742d5.js";import{T as x}from"./BasicForm.0ba2e15f.js";import{u as T}from"./useTable.6e5baa13.js";import{g as E,c as _,s as F,d as S}from"./module.data.1449889b.js";import{_ as P,h as w}from"./index.e84e956c.js";import D from"./ModuleModal.b90fddbd.js";import V from"./PValueSettingModal.bb5f3795.js";import{b as M}from"./index.c505e96f.js";import{A as k,$ as A,a0 as d,B as v,D as R,w as r,a6 as h,ae as y}from"./vendor.5879c5ca.js";/* empty css                *//* empty css              */import"./useForm.696aa965.js";import"./index.ea14bdae.js";/* empty css                *//* empty css                */import"./useWindowSizeFn.6a6adedd.js";import"./useContentViewHeight.ccc8749b.js";/* empty css                *//* empty css                *//* empty css               */import"./uuid.2b29000c.js";/* empty css               */import"./useSortable.a10c06e7.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./index.8b70aabd.js";/* empty css                *//* empty css                *//* empty css                */import"./download.e6dbd100.js";import"./base64Conver.bb012c73.js";import"./index.e83a4b09.js";import"./appPrivilegeValue.48b59d82.js";const{createMessage:$}=w(),I=k({name:"Module",components:{BasicTable:B,TableAction:x,ModuleModal:D,PValueSettingModal:V},setup(){const[e,{openModal:s,setModalProps:n}]=M(),[m,{openModal:c}]=M(),[b,{reload:u,expandAll:i}]=T({title:"\u5217\u8868",api:E,columns:_,isTreeTable:!0,formConfig:{labelWidth:120,schemas:F,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},expandRowByClick:!0,canColDrag:!0,useSearchForm:!0,pagination:!1,bordered:!0,showIndexColumn:!1,actionColumn:{width:170,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"}}});A(()=>{setTimeout(()=>{i()},1e3)});function o(t){n({title:"\u65B0\u589E\u83DC\u5355"}),s(!0,{record:t,isUpdate:!1})}function a(t,p){p.stopPropagation(),n({title:"\u65B0\u589E\u3010"+t.name+"\u3011\u7684\u5B50\u83DC\u5355"}),t={pid:t.id},s(!0,{record:t,isUpdate:!0})}function f(t,p){p.stopPropagation(),c(!0,{record:t,isUpdate:!0})}function g(t,p){p.stopPropagation(),n({title:"\u4FEE\u6539\u83DC\u5355"}),s(!0,{record:t,isUpdate:!0})}function l(t){if(t.children&&t.children.length>0){$.warning("\u6709\u5B50\u8282\u70B9\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01");return}S([t.id]).then(()=>{u()})}function j(){return C(this,null,function*(){yield u(),setTimeout(()=>{i()},100)})}return{registerTable:b,registerModal:e,registerPValueModal:m,handleCreate:o,handleEdit:g,handleEditPValue:f,handleCreateChild:a,handleDelete:l,handleSuccess:j}}}),U=y(" \u65B0\u589E ");function N(e,s,n,m,c,b){const u=d("a-button"),i=d("Authority"),o=d("TableAction"),a=d("BasicTable"),f=d("ModuleModal"),g=d("PValueSettingModal");return v(),R("div",null,[r(a,{onRegister:e.registerTable},{toolbar:h(()=>[r(i,{value:"Module:0"},{default:h(()=>[r(u,{type:"primary",onClick:e.handleCreate},{default:h(()=>[U]),_:1},8,["onClick"])]),_:1})]),action:h(({record:l})=>[r(o,{actions:[{auth:"Module:0",tooltip:"\u6DFB\u52A0\u5B50\u83DC\u5355",icon:"ant-design:plus-outlined",onClick:e.handleCreateChild.bind(null,l)},{auth:"Module:6",tooltip:"\u8BBE\u7F6E\u6743\u9650\u503C",icon:"ant-design:setting-outlined",onClick:e.handleEditPValue.bind(null,l)},{auth:"Module:2",tooltip:"\u4FEE\u6539",icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,l)},{auth:"Module:3",tooltip:"\u5220\u9664",icon:"ant-design:delete-outlined",color:"error",onClick:j=>{j.stopPropagation()},popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:e.handleDelete.bind(null,l)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),r(f,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),r(g,{onRegister:e.registerPValueModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var Te=P(I,[["render",N]]);export{Te as default};
