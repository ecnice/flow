var y=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var F=(o,s,e)=>s in o?y(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,v=(o,s)=>{for(var e in s||(s={}))R.call(s,e)&&F(o,e,s[e]);if(B)for(var e of B(s))$.call(s,e)&&F(o,e,s[e]);return o},x=(o,s)=>L(o,O(s));var j=(o,s,e)=>new Promise((u,p)=>{var c=t=>{try{n(e.next(t))}catch(i){p(i)}},l=t=>{try{n(e.throw(t))}catch(i){p(i)}},n=t=>t.done?u(t.value):Promise.resolve(t.value).then(c,l);n((e=e.apply(o,s)).next())});import{B as k,a as A}from"./index.c505e96f.js";import{B as U}from"./BasicForm.0ba2e15f.js";import{u as D}from"./useForm.696aa965.js";import{b as G}from"./account.data.00b4e9dd.js";import{b as I}from"./account.1f18251a.js";import{g as N}from"./group.52de35d8.js";import{A as P,bD as T,r as g,u as h,j as V,a0 as b,B as W,a1 as z,a6 as _,w as E,a4 as q}from"./vendor.5879c5ca.js";import{_ as H}from"./index.e84e956c.js";import"./useWindowSizeFn.6a6adedd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.8b70aabd.js";/* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./download.e6dbd100.js";import"./base64Conver.bb012c73.js";import"./index.e83a4b09.js";const J=P({name:"AccountModal",components:{BasicModal:k,BasicForm:U,Select:T},emits:["success","register"],setup(o,{emit:s}){const e=g(!0),u=g([]),p=g("\u8BBE\u7F6E\u7EC4"),[c,{setFieldsValue:l,updateSchema:n,resetFields:t,validate:i}]=D({labelWidth:100,schemas:G,showActionButtonGroup:!1,actionColOptions:{span:23}}),[m,{setModalProps:d,closeModal:M}]=A(r=>j(this,null,function*(){t(),d({confirmLoading:!1,title:"\u7ED9\u8D26\u53F7\u3010"+r.record.realName+"("+r.record.username+")\u3011\u8BBE\u7F6E\u7EC4"}),e.value=!!(r==null?void 0:r.isUpdate);const f=yield N();if(f.forEach(a=>{a.label=a.name,a.value=a.id}),u.value=f,h(e)){let a=r.record.groups||[];a=a.map(C=>C.id),l(x(v({},r.record),{groups:a}))}}));let w=V(()=>h(e)?p.value:"\u65B0\u589E");function S(){return j(this,null,function*(){try{d({confirmLoading:!0});const r=yield i();r.groups=r.groups.map(f=>({id:f})),r.userId=r.id,delete r.id,yield I(r),M(),s("success")}finally{d({confirmLoading:!1})}})}return{registerModal:m,registerForm:c,getTitle:w,groupOptions:u,handleSubmit:S}}});function K(o,s,e,u,p,c){const l=b("Select"),n=b("BasicForm"),t=b("BasicModal");return W(),z(t,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:_(()=>[E(n,{onRegister:o.registerForm},{groups:_(({model:i,field:m})=>[E(l,{value:i[m],"onUpdate:value":d=>i[m]=d,mode:"multiple",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u7EC4","option-label-prop":"label",options:o.groupOptions},null,8,["value","onUpdate:value","options"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var _e=H(J,[["render",K]]);export{_e as default};
